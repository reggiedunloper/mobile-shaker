<!doctype html>
<html>
  <head>
    <title>Mobile Shaker Test</title>
  </head>
  <body>
    <main>
      <h1>Test Shaker 1</h1>
      <h2>0</h2>
      <p id="x">0</p>
      <p id="y">0</p>
      <p id="z">0</p>
      <p id="status"></p>
    </main>
    <script>

      let intervalid = setInterval(checkMovement, 1000, Number(document.querySelector('h2').innerText));

      function checkMovement(currvalue) {
        if (currvalue === Number(document.querySelector('h2').innerText)) {
          document.querySelector("#status").innerText = "STOPPED"
        } else {
          document.querySelector("#status").innerText = "STILL SPINNING"
        }
      }

      function updateTotal(amount) {
        if (amount > 10) {
          let currvalue = Number(document.querySelector('h2').innerText)
          currvalue = currvalue + amount
        document.querySelector('h2').innerText = currvalue
        }
      }

      function handleMotionEvent(event) {
        console.log(event);
        var xmovement = Math.abs(event.acceleration.x);
        var ymovement = Math.abs(event.acceleration.y);
        var zmovement = Math.abs(event.acceleration.z);


        document.querySelector('#x').innerText = xmovement
        document.querySelector('#y').innerText = ymovement
        document.querySelector('#z').innerText = zmovement

        updateTotal(xmovement + ymovement + zmovement);

      }

      window.addEventListener("devicemotion", handleMotionEvent, true);
    </script>
  </body>
</html>